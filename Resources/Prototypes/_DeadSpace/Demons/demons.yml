
- type: entity
  parent: BaseMobAsteroid
  id: BaseMobDemonRS
  name: демон
  description: Монстр!
  abstract: true
  components:
  - type: Sprite
    drawdepth: Mobs
    sprite: _DeadSpace/Demons/demon_simple.rsi
  - type: HTN
    rootTask:
      task: SimpleHostileCompound
  - type: NpcFactionMember
    factions:
    - SimpleHostile
  - type: Tag
    tags:
      - CannotSuicide
      - DoorBumpOpener
      - FootstepSound
  - type: Prying
    pryPowered: true
    force: true
    speedModifier: 1.5
    useSound:
      path: /Audio/Items/crowbar.ogg
  - type: MovementAlwaysTouching
  - type: GhostTakeoverAvailable
  - type: MovementSpeedModifier
    baseWalkSpeed: 1.5
    baseSprintSpeed: 3
  - type: MobState
    allowedStates:
    - Alive
    - Dead
  - type: MobThresholds
    thresholds:
      0: Alive
      100: Dead
  - type: Stamina
  - type: Appearance
  - type: CombatMode
  - type: MeleeWeapon
    altDisarm: false
    hidden: true
    angle: 45
    soundHit:
        path: /Audio/Effects/demon_attack1.ogg
    animation: WeaponArcClaw
    damage:
      types:
        Slash: 5
        Blunt: 7
        Piercing: 1
        Heat: 5
  - type: Language
    selectedLanguage: DemonLanguage
    knownLanguages:
    - DemonLanguage
  - type: Demon
  - type: Damageable
    damageModifierSet: Demon
    damageContainer: BiologicalMetaphysical
  - type: AutoDeleteOnDeath
  - type: Vocal
    sounds:
      Male: Demon
      Female: Demon
      Unsexed: Demon
  - type: ZombieImmune
  - type: ImmunitetInfectionDead
  - type: PassiveDamage
    allowedStates:
    - Alive
    - Critical
    damageCap: 0
    damage:
      types:
        Poison: -2
        Holy: -1
      groups:
        Brute: -2
        Burn: -2
  - type: TTS
    voice: Avozu
  - type: NoSlip
  - type: Reactive
    reactions:
    - reagents: [ Holywater ]
      methods: [ Touch ]
      effects:
      - !type:HealthChange
        scaleByQuantity: true
        damage:
          types:
            Holy: 5

- type: entity
  parent: BaseMobDemonRS
  id: BaseMobDemonADT
  abstract: true
  components:
  - type: Sprite
    drawdepth: Mobs
    sprite: _ADT/Mobs/Aliens/nar_si_big_demons.rsi
  - type: Vocal
    sounds:
      Male: DemonADT
      Female: DemonADT
      Unsexed: DemonADT

- type: entity
  parent: BaseMobDemonRS
  id: MobDemonSlaughter
  components:
  - type: Sprite
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: slaughter_demon
  - type: DamageStateVisuals
    states:
      Alive:
        Base: slaughter_demon
      Dead:
        Base: slaughter_demon
  - type: MobThresholds
    thresholds:
      0: Alive
      200: Dead
  - type: StunAttack
  - type: Damageable
    damageModifierSet: SlaughterDemon
    damageContainer: BiologicalMetaphysical
  - type: MovementSpeedModifier
    baseWalkSpeed: 1.5
    baseSprintSpeed: 2
  - type: MeleeWeapon
    altDisarm: false
    hidden: true
    angle: 45
    soundHit:
        path: /Audio/Effects/demon_attack1.ogg
    animation: WeaponArcClaw
    damage:
      types:
        Slash: 5
        Blunt: 12
        Piercing: 1
        Heat: 10
        Structural: 25
  - type: GhostRole
    allowMovement: true
    makeSentient: true
    name: ghost-role-information-slaughter-name
    description: ghost-role-information-slaughter-description
    rules: ghost-role-information-slaughter-rules
  - type: Reflect
    reflectProb: 0.25

- type: entity
  parent: MobDemonSlaughter
  id: MobDemonSlaughterBow
  components:
  - type: Sprite
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: bow_demon
  - type: GhostRole
    allowMovement: true
    makeSentient: true
    name: ghost-role-information-slaughter-name
    description: ghost-role-information-slaughter-description
    rules: ghost-role-information-slaughter-rules

- type: entity
  parent: BaseMobDemonRS
  id: MobDemonHonker
  components:
  - type: Sprite
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: honk_demon
  - type: DamageStateVisuals
    states:
      Alive:
        Base: honk_demon
      Dead:
        Base: honk_demon
  - type: Vocal
    sounds:
      Male: DemonHonk
      Female: DemonHonk
      Unsexed: DemonHonk
  - type: MobThresholds
    thresholds:
      0: Alive
      150: Dead
  - type: MovementSpeedModifier
    baseWalkSpeed: 2
    baseSprintSpeed: 4
  - type: MeleeWeapon
    altDisarm: false
    hidden: true
    angle: 45
    soundHit:
        path: /Audio/Items/bikehorn.ogg
    animation: WeaponArcClaw
    damage:
      types:
        Slash: 2.5
        Blunt: 3
        Piercing: 1
        Heat: 10
  - type: FootstepModifier
    footstepSoundCollection:
      collection: FootstepClownFast
  - type: StunRadius
    stunRadiusSound:
      collection: HonkDemonLaugh
  - type: GhostRole
    allowMovement: true
    makeSentient: true
    name: ghost-role-information-honker-name
    description: ghost-role-information-honker-description
    rules: ghost-role-information-honker-rules

- type: entity
  parent: BaseMobDemonRS
  id: MobDemonIfrit
  components:
  - type: Sprite
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: demon
  - type: DamageStateVisuals
    states:
      Alive:
        Base: demon
      Dead:
        Base: demon
  - type: MobThresholds
    thresholds:
      0: Alive
      100: Dead
  - type: GhostRole
    allowMovement: true
    makeSentient: true
    name: ghost-role-information-demon-name
    description: ghost-role-information-demon-description
    rules: ghost-role-information-demon-rules
  - type: Gun
    fireRate: 1.5
    useKey: false
    selectedMode: SemiAuto
    availableModes:
      - SemiAuto
    soundGunshot: /Audio/Magic/fireball.ogg
  - type: BallisticAmmoProvider
    proto: FireballBullet

- type: entity
  parent: BaseMobDemonRS
  id: MobDemonJaunt
  components:
  - type: Sprite
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: jaunt
  - type: DamageStateVisuals
    states:
      Alive:
        Base: jaunt
      Dead:
        Base: jaunt
  - type: MobThresholds
    thresholds:
      0: Alive
      100: Dead
  - type: MovementSpeedModifier
    baseWalkSpeed: 2.5
    baseSprintSpeed: 4.5
  - type: DemonDash
  - type: LimitedCharges
    maxCharges: 1
  - type: GhostRole
    allowMovement: true
    allowSpeech: true
    makeSentient: true
    name: ghost-role-information-jaunt-name
    description: ghost-role-information-jaunt-description
    rules: ghost-role-information-jaunt-rules
  - type: MeleeWeapon
    altDisarm: false
    hidden: true
    angle: 45
    soundHit:
        path: /Audio/Effects/demon_attack1.ogg
    animation: WeaponArcClaw
    damage:
      types:
        Slash: 5
        Blunt: 7
        Piercing: 1
        Heat: 5

- type: entity
  parent: BaseMobDemonADT
  id: MobDemonBloodyArms
  components:
  - type: Sprite
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: bloody_army_soldier    
      scale: 0.7, 0.7
  - type: DamageStateVisuals
    states:
      Alive:
        Base: bloody_army_soldier
      Dead:
        Base: bloody_army_soldier_dead
  - type: MobThresholds
    thresholds:
      0: Alive
      125: Dead
  - type: MovementSpeedModifier
    baseWalkSpeed: 2.5
    baseSprintSpeed: 5.5
  - type: GhostRole
    allowMovement: true
    allowSpeech: true
    makeSentient: true
    name: ghost-role-information-bloodarms-name
    description: ghost-role-information-bloodarms-description
    rules: ghost-role-information-bloodarms-rules
  - type: MeleeWeapon
    attackRate: 3
    altDisarm: false
    hidden: true
    angle: 45
    wideAnimation: WeaponArcStatic
    soundHit:
      collection: mantis_attack
    soundNoDamage:
      collection: mantis_attack
    soundSwing:
      collection: mantis_attack
    animation: WeaponArcClaw
    damage:
      types:
        Slash: 5
        Piercing: 5
  - type: Prying
    speedModifier: 4
  - type: JumpAbility
    jumpDistance: 8
    jumpSound:
      collection: mantis_rush

- type: entity
  parent: BaseMobDemonADT
  id: MobDemonSnake
  components:
  - type: Sprite
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: dark_rattlesnake  
      scale: 0.7, 0.7
  - type: DamageStateVisuals
    states:
      Alive:
        Base: dark_rattlesnake
      Dead:
        Base: dark_rattlesnake_dead
  - type: MobThresholds
    thresholds:
      0: Alive
      90: Dead
  - type: MovementSpeedModifier
    baseWalkSpeed: 2.5
    baseSprintSpeed: 2.5
  - type: GhostRole
    allowMovement: true
    allowSpeech: true
    makeSentient: true
    name: ghost-role-information-demonsnake-name
    description: ghost-role-information-demonsnake-description
    rules: ghost-role-information-demonsnake-rules
  - type: MeleeWeapon
    altDisarm: false
    hidden: true
    angle: 45
    soundHit:
        path: /Audio/Effects/demon_attack1.ogg
    animation: WeaponArcClaw
    damage:
      types:
        Slash: 5
        Blunt: 7
        Piercing: 1
        Heat: 5
  - type: NPCUseActionOnTarget
    actionId: ActionGoliathTentacle

- type: entity
  parent: BaseMobDemonADT
  id: MobDemonMouth
  components:
  - type: Sprite
    layers:
    - map: [ "enum.DamageStateVisualLayers.Base" ]
      state: demonic_mouth
      scale: 0.7, 0.7
  - type: DamageStateVisuals
    states:
      Alive:
        Base: demonic_mouth
      Dead:
        Base: demonic_mouth_dead
  - type: MobThresholds
    thresholds:
      0: Alive
      265: Dead
  - type: MovementSpeedModifier
    baseWalkSpeed: 3
    baseSprintSpeed: 3
  - type: GhostRole
    allowMovement: true
    allowSpeech: true
    makeSentient: true
    name: ghost-role-information-mouthdemon-name
    description: ghost-role-information-mouthdemon-description
    rules: ghost-role-information-mouthdemon-rules
  - type: MeleeWeapon
    altDisarm: false
    hidden: true
    angle: 45
    soundHit:
        path: /Audio/Effects/demon_attack1.ogg
    animation: WeaponArcClaw
    damage:
      types:
        Slash: 5
        Blunt: 3
        Piercing: 1
  - type: Devourer
    whitelist:
      components:
      - Door
      tags:
      - Wall
  - type: Puller
    needsHands: false
  - type: Fixtures
    fixtures: # TODO: This needs a second fixture just for mob collisions.
      fix1:
        shape:
          !type:PhysShapeCircle
          radius: 0.35
        density: 650 # instead of 185
        restitution: 0.0
  - type: ActionGun
    action: ActionDemonBreath
    gunProto: DemonBreathGun

- type: entity
  parent: BaseAction
  id: ActionDemonBreath
  name: "[color=red]Кричащие слюни[/color]"
  description: Вы накапливаете раз в 15 секунд всю свою силу, плюясь в свою жертву остатками не перевереных живностей-... Кажеться, эти слюни тоже умеют кричать
  components:
  - type: Action
    icon: { sprite : _DeadSpace/Objects/Weapons/Throwable/demon_bola.rsi, state: icon }
    itemIconStyle: BigAction
    priority: 2
  - type: TargetAction
    checkCanAccess: false
    range: 0
  - type: WorldTargetAction
    event: !type:ActionGunShootEvent
    
- type: entity
  categories: [ HideSpawnMenu ]
  id: DemonBreathGun
  name: Плевок слюной
  description: Вы плюёте в своего недруга своими слюнями, заставляя того падать на пол и быть замедлённым, пока тот не скинет с себя это несто
  components:
  - type: RechargeBasicEntityAmmo
    rechargeCooldown: 15
  - type: BasicEntityAmmoProvider
    proto: DemonBola
    capacity: 1
    count: 1
  - type: Gun
    projectileSpeed: 15
    soundGunshot:
      path: /Audio/_DeadSpace/Effects/Species/demon_bola_throw.ogg

- type: entity
  name: слюни демона
  id: DemonBola
  categories: [ HideSpawnMenu ]
  parent: Bola
  description: Фу! Какое оно мерзкое! Эта штука и кричать может!
  components:
  - type: Sprite
    sprite: _DeadSpace/Objects/Weapons/Throwable/demon_bola.rsi
    state: icon
  - type: Ensnaring
    freeTime: 2.0
    breakoutTime: 1 #all bola should generally be fast to remove
    walkSpeed: 0.2 #makeshift bola shouldn't slow too much
    sprintSpeed: 0.2
    staminaDamage: 0 # anything but this is gamebreaking
    canThrowTrigger: true
    canMoveBreakout: true
    maxEnsnares: 1
  - type: StunOnCollide
    stunAmount: 1
    knockdownAmount: 1
  - type: EmitSoundOnThrow
    sound: /Audio/_DeadSpace/Effects/Species/demon_bola_throw.ogg
  - type: EmitSoundOnLand
    sound: /Audio/_DeadSpace/Effects/Species/demon_bola_snap.ogg

- type: entity
  id: FireballBullet
  name: огненный шар
  parent: BaseBullet
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Heat: 10
  - type: Sprite
    sprite: Objects/Magic/magicactions.rsi
    layers:
      - state: fireballbullet
  - type: Ammo
